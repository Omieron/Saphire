# ===========================================
# Saphire Backend - Docker Compose
# Sadece Backend (PostgreSQL ayrı container'da)
# ===========================================

services:
  # Spring Boot Backend
  backend:
    build:
      context: .
      dockerfile: Dockerfile
    container_name: saphire-backend
    restart: unless-stopped
    env_file:
      - .env
    environment:
      # Database - host.docker.internal ile host'taki PostgreSQL'e bağlan
      DB_HOST: host.docker.internal
      DB_PORT: ${DB_PORT:-5434}
      DB_NAME: ${DB_NAME:-saphire_system}
      DB_USERNAME: ${DB_USERNAME:-saphire_master}
      DB_PASSWORD: ${DB_PASSWORD:-saphire_password}
      # Server
      SERVER_PORT: 8080
      # JWT
      JWT_SECRET: ${JWT_SECRET:-ee5ddc7600da0fc86d4bb16f5b3b4862c47c210bbb9f2c854e9b04cf9cfb6de3}
      JWT_EXPIRATION: ${JWT_EXPIRATION:-28800000}
      # Timezone
      TIMEZONE: ${TIMEZONE:-Europe/Istanbul}
      # Logging
      LOG_LEVEL_ROOT: ${LOG_LEVEL_ROOT:-INFO}
      LOG_LEVEL_APP: ${LOG_LEVEL_APP:-DEBUG}
    ports:
      - "8080:8080"
    extra_hosts:
      - "host.docker.internal:host-gateway"
